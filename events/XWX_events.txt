add_namespace = XWX_political_events
add_namespace = XWX_kmt_events
add_namespace = XWX_diplomatic_events

country_event = { # Industry Focus Unlock Event 
	id = XWX_political_events.1
	title = XWX_political_events.1.t
	desc = XWX_political_events.1.desc
	picture = GFX_report_event_XWX_farmer

	is_triggered_only = yes

	option = { 
		name = XWX_political_events.1.a
		complete_national_focus = XWX_industrial_revolution
	}

}

country_event = { # Tianyu Fort completed 
	id = XWX_political_events.2
	title = XWX_political_events.2.t
	desc = XWX_political_events.2.desc
	picture = GFX_report_event_japan_army_mountainside

	is_triggered_only = yes

	option = { 
		name = XWX_political_events.2.a
		effect_tooltip = {
			985 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 8104
                }
            }
		}
        custom_effect_tooltip = generic_skip_one_line_tt
		effect_tooltip = {
            swap_ideas = {
                remove_idea = XWX_mountaineer_corps
                add_idea = XWX_mountain_fort
            }
		}
		add_manpower = 10000
	}

}

country_event = { # Second Gannan Famine 
	id = XWX_political_events.3
	title = XWX_political_events.3.t
	desc = XWX_political_events.3.desc
	picture = GFX_report_event_XWX_farmer

	is_triggered_only = yes

	option = { 
		name = XWX_political_events.3.a
		set_country_flag = XWX_second_gannan_famine
		add_ideas = XWX_famine
		custom_effect_tooltip = generic_skip_one_line_tt
		add_popularity = {
			ideology = ROOT
			popularity = -0.1
		}
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = XWX_start_second_gannan_famine
	}

}

country_event = { # Second Commune Conference
	id = XWX_political_events.4
	title = XWX_political_events.4.t
	desc = XWX_political_events.4.desc
	picture = GFX_report_event_asian_politicians

	is_triggered_only = yes

	option = { # Centralists
		name = XWX_political_events.4.a
		set_power_balance = {
			id = XWX_communes_bop
			left_side = XWX_federalists
			right_side = XWX_centralists
			set_value = 0.15
		}
	}

	option = { # Federalists
		name = XWX_political_events.4.b
		set_power_balance = {
			id = XWX_communes_bop
			left_side = XWX_federalists
			right_side = XWX_centralists
			set_value = -0.15
		}
	}

}

country_event = { # Kuomintang Coup (without Civil War) 
	id = XWX_kmt_events.1
	title = XWX_kmt_events.1.t
	desc = XWX_kmt_events.1.desc
	picture = GFX_report_event_XWX_KMT_victory

	is_triggered_only = yes

	option = { 
		name = XWX_kmt_events.1.a
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}
	}

}

country_event = { # XWX (FROM) invites ROOT to faction
	id = XWX_diplomatic_events.1
	title = XWX_diplomatic_events.1.t
	desc = XWX_diplomatic_events.1.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_applicant
			FROM = {
				save_event_target_as = alliance_inviter
			}
		}
	}

	option = { # Join
		name = XWX_diplomatic_events.1.a
		ai_chance = {
			base = 20
			modifier = {
				add = 5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0.1
				is_faction_leader = yes
			}
			modifier = {
				factor = 0.5
				NOT = {
					any_neighbor_country = {
						is_in_faction_with = FROM
					}
				}
			}
			modifier = {
				factor = 3
				has_war = yes
			}
			modifier = {
				factor = 10
				any_other_country = {
					has_war_with = FROM
					has_war_with = ROOT
				}
				is_in_faction = no
			}
			modifier = {
				factor = 5
				any_other_country = {
					has_war_with = FROM
					has_war_with = ROOT
				}
				is_in_faction = yes
			}
			modifier = {
				factor = 2
				FROM = {
					network_strength = {
						target = ROOT
						value > 49
					}
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_to_faction = ROOT
			}
		}
		FROM = { country_event = { id = XWX_diplomatic_events.2 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_applicant@ROOT
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}

	option = { # Refuse
		ai_chance = {
			base = 10
			modifier = {
				factor = 0.5
				is_guaranteed_by = FROM
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 30
				}
			}
		}
		name = XWX_diplomatic_events.1.b
		FROM = { country_event = { id = XWX_diplomatic_events.3 hours = 6 } }
	}

}

country_event = { # XWX (FROM) invites ROOT to faction -> FROM accepts
	id = XWX_diplomatic_events.2
	title = XWX_diplomatic_events.2.t
	desc = XWX_diplomatic_events.2.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = { 
		name = XWX_diplomatic_events.2.a
		add_to_faction = FROM
	}

}

country_event = { # XWX (FROM) invites ROOT to faction -> FROM refuses
	id = XWX_diplomatic_events.3
	title = XWX_diplomatic_events.3.t
	desc = XWX_diplomatic_events.3.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = { 
		name = XWX_diplomatic_events.3.a
		add_ai_strategy = {
			type = antagonize
			id = FROM
			value = 50
		}
	}

}

country_event = { # XWX requests relief supplies
	id = XWX_diplomatic_events.4
	title = XWX_diplomatic_events.4.t
	desc = XWX_diplomatic_events.4.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = { 
		name = XWX_diplomatic_events.4.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value < 0
				}
			}
		}
		add_political_power = -10
		reverse_add_opinion_modifier = {
			target = FROM
			modifier = XWX_aided_during_famine
		}
		FROM = {
			country_event = {
				id = XWX_diplomatic_events.5
				hours = 6
			}
		}
	}

	option = { 
		name = XWX_diplomatic_events.4.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 3
				has_opinion = {
					target = FROM
					value < 30
				}
			}
		}
		reverse_add_opinion_modifier = {
			target = FROM
			modifier = XWX_refused_to_help
		}
		FROM = {
			country_event = {
				id = XWX_diplomatic_events.6
				hours = 6
			}
		}
	}

}

country_event = { # XWX requests relief supplies -> FROM refuses
	id = XWX_diplomatic_events.5
	title = XWX_diplomatic_events.5.t
	desc = XWX_diplomatic_events.5.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = { 
		name = XWX_diplomatic_events.5.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = XWX_aided_during_famine
			}
		}
		custom_effect_tooltip = generic_skip_one_line_tt
		add_to_variable = {
            XWX_famine_progress = 10
            tooltip = famine_progress_tt
        }
	}

}

country_event = { # XWX requests relief supplies -> FROM refuses
	id = XWX_diplomatic_events.6
	title = XWX_diplomatic_events.6.t
	desc = XWX_diplomatic_events.6.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = { 
		name = XWX_diplomatic_events.6.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = XWX_refused_to_help
			}
		}
	}

}
